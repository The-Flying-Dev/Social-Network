<div class="page-header">
  <h4>Post</h4>


  <ul>
    <% if @post.content.length > 0 %>

      <li><%= @post.content %></li>
          
    <% end %>

    <% if @post.images.length > 0 %>
  
      <% (0...@post.images.count).each do |image| %>   
      <li><%= image_tag(@post.images[image], class: "image-style" ) %></li> 
  
      <% end %>
    <% end %>

    <li>by <%= link_to @post.user.username, main_app.profile_path(@post.user.username) %></li>
    </ul>

 
    <%= link_to main_app.like_post_path(@post), class: "btn btn-outline-dark",method: :put  do %>
        <i class="fa-solid fa-heart"></i> <%= @post.get_upvotes.size %>       
      <% end %>
     
    <%= link_to main_app.dislike_post_path(@post), class: "btn btn-outline-dark", method: :put do %>
      <i class="fa-solid fa-heart-crack"></i> <%= @post.get_downvotes.size %>      
    <% end %>


  <% if @post.user == current_user %>
    <%= link_to "Edit", main_app.edit_post_path(@post), class: "btn btn-default" %>
    <%= link_to "Remove Post", main_app.post_path(@post), method: :delete,
      data: { confirm: "Are you sure you want to remove this post?" }, class: "btn btn-default" %>
  <% end %>


  <h3>Comments</h3>

    <%= render @post.comments %> 

  <!-- form to create comment -->

  <h4>New Comment</h4>

  <%= form_for @post.comments.build do | f | %>

    <div class="form-group">
      <%= f.label :content %><br />
      <%= f.text_area :content, class: "form-control", required: true  %>
    </div>

    <%= f.hidden_field :post_id %>
    <%= f.submit class: "btn btn-primary" %>

  <% end %>
  
</div>

<%= link_to "Home", main_app.posts_path, class: "btn btn-default" %>